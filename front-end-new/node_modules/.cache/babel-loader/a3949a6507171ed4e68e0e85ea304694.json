{"ast":null,"code":"var _jsxFileName = \"/home/yamamotod/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/djangorestTODO/TODO/front-end-new/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './App.css';\nimport UserList from './components/User.js';\nimport ProjectList from './components/Project.js';\nimport TodoList from './components/Todo.js';\nimport LoginForm from './components/LoginForm.js';\nimport axios from 'axios';\nimport { Route, BrowserRouter, Routes, Link, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NotFound404 = () => {\n  _s();\n\n  var {\n    pathname\n  } = useLocation();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u043F\\u043E \\u0430\\u0434\\u0440\\u0435\\u0441\\u0443 \\\"\", pathname, \"\\\" \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u0430\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NotFound404, \"qVMqkCpYCjknUqSjfMln5RFSkbo=\", false, function () {\n  return [useLocation];\n});\n\n_c = NotFound404;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      'users': [],\n      'projects': [],\n      'todos': [],\n      'token': ''\n    };\n  }\n\n  obtainAuthToken(login, password) {\n    axios.post('http://127.0.0.1:8000/api-auth-token/', {\n      'username': login,\n      'password': password\n    }).then(response => {\n      const token = response.data.token;\n      console.log('token:', token);\n      localStorage.setItem('token', token);\n      this.setState({\n        'token': token\n      }, this.getData);\n    }).catch(error => console.log(error));\n  }\n\n  isAuth() {\n    return !!this.state.token;\n  }\n\n  componentDidMount() {\n    let token = localStorage.getItem('token');\n    this.setState({\n      'token': token\n    }, this.getData);\n  }\n\n  getHeaders() {\n    if (this.isAuth()) {\n      return {\n        'Authorization': 'Token ' + this.state.token\n      };\n    }\n\n    return {};\n  }\n\n  getData() {\n    let headers = this.getHeaders();\n    axios.get('http://127.0.0.1:8000/api/project/', {\n      headers\n    }).then(response => {\n      const projects = response.data;\n      this.setState({\n        'projects': projects\n      });\n    }).catch(error => console.log(error));\n    axios.get('http://127.0.0.1:8000/api/todo/').then(response => {\n      const todos = response.data;\n      this.setState({\n        'todos': todos\n      });\n    }).catch(error => console.log(error));\n  }\n\n  logOut() {\n    localStorage.setItem('token', '');\n    this.setState({\n      'token': ''\n    }, this.getData);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n        children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                children: \"Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/project\",\n                children: \"Project\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/todo\",\n                children: \"Todo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                children: [\"logi  \", /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: this.isAuth() ? /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => this.logOut(),\n                    children: \"Logout\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 42\n                  }, this) : /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/login\",\n                    children: \"Login\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 98\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 41\n                }, this), \"n\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: this.isAuth() ? /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => this.logOut(),\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 34\n              }, this) : /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 90\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(UserList, {\n              users: this.state.users\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 44\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/project\",\n            element: /*#__PURE__*/_jsxDEV(ProjectList, {\n              projects: this.state.projects\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 51\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/todo\",\n            element: /*#__PURE__*/_jsxDEV(TodoList, {\n              todos: this.state.todos\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 48\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/login\",\n            element: /*#__PURE__*/_jsxDEV(LoginForm, {\n              obtainAuthToken: (login, password) => this.obtainAuthToken(login, password)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/users\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            element: /*#__PURE__*/_jsxDEV(NotFound404, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 38\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"NotFound404\");","map":{"version":3,"names":["React","UserList","ProjectList","TodoList","LoginForm","axios","Route","BrowserRouter","Routes","Link","useLocation","NotFound404","pathname","App","Component","constructor","props","state","obtainAuthToken","login","password","post","then","response","token","data","console","log","localStorage","setItem","setState","getData","catch","error","isAuth","componentDidMount","getItem","getHeaders","headers","get","projects","todos","logOut","render","users"],"sources":["/home/yamamotod/Рабочий стол/djangorestTODO/TODO/front-end-new/src/App.js"],"sourcesContent":["import React from 'react';\nimport './App.css';\nimport UserList from './components/User.js'\nimport ProjectList from './components/Project.js'\nimport TodoList from './components/Todo.js'\nimport LoginForm from './components/LoginForm.js'\nimport axios from 'axios'\nimport { Route, BrowserRouter, Routes, Link, useLocation } from 'react-router-dom'\n\nconst NotFound404 = () => {\n  var { pathname } = useLocation()\n\n  return (\n    <div>\n      Страница по адресу \"{pathname}\" не найдена\n    </div>\n  )\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      'users': [],\n      'projects': [],\n      'todos': [],\n      'token':''\n    }\n  }\n\n  obtainAuthToken(login, password) {\n    axios\n        .post('http://127.0.0.1:8000/api-auth-token/', {\n            'username': login,\n            'password': password\n        })\n        .then(response => {\n            const token = response.data.token\n            console.log('token:', token)\n            localStorage.setItem('token', token)\n            this.setState({\n                'token': token\n            }, this.getData)\n        })\n        .catch(error => console.log(error))\n}\n\nisAuth() {\n    return !!this.state.token\n}\n\n\n\n\n\ncomponentDidMount() {\n  let token = localStorage.getItem('token')\n  this.setState({\n      'token': token\n  }, this.getData)\n}\ngetHeaders() {\n  if (this.isAuth()) {\n      return {\n          'Authorization': 'Token ' + this.state.token\n      }\n  }\n  return {}\n}\ngetData() {\n  let headers = this.getHeaders()\n\n    axios.get('http://127.0.0.1:8000/api/project/',{headers})\n      .then(response => {\n        const projects = response.data\n        this.setState(\n          {\n            'projects': projects\n          }\n        )\n      }).catch(error => console.log(error))\n\n    axios.get('http://127.0.0.1:8000/api/todo/',)\n      .then(response => {\n        const todos = response.data\n        this.setState(\n          {\n            'todos': todos\n          }\n        )\n      }).catch(error => console.log(error))\n  }\n  logOut() {\n    localStorage.setItem('token', '')\n    this.setState({\n        'token': '',\n    }, this.getData)\n}\n\n  render() {\n    return (\n      <div className=\"App\">\n        <BrowserRouter>\n          <nav>\n            <ul>\n              <li>\n                <Link to='/'>Users</Link>\n              </li>\n              <li>\n                <Link to='/project'>Project</Link>\n              </li>\n              <li>\n                <Link to='/todo'>Todo</Link>\n              </li>\n              <li>\n                <Link to='/login'>logi  <li>\n                        {this.isAuth() ? <button onClick={() => this.logOut()}>Logout</button> : <Link to='/login'>Login</Link> }\n                        </li>n</Link>\n              </li>\n              <li>\n                {this.isAuth() ? <button onClick={() => this.logOut()}>Logout</button> : <Link to='/login'>Login</Link> }\n              </li>\n            </ul>\n          </nav>\n          <Routes>\n            <Route exact path='/' element={<UserList users={this.state.users} />} />\n            <Route exact path='/project' element={<ProjectList projects={this.state.projects} />} />\n            <Route exact path='/todo' element={<TodoList todos={this.state.todos} />} />\n            <Route exact path='/login' element={<LoginForm obtainAuthToken={(login, password) => this.obtainAuthToken(login, password)} />} />\n            <Route path='/users'/>\n            <Route path='*' element={<NotFound404 />} />\n          </Routes>\n        </BrowserRouter>\n      </div>\n    )\n  }\n}\n\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}